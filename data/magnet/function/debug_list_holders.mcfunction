# Makes all entities (not players) holding a magnet announce themselves in chat.

#execute as @e[type=!minecraft:player,nbt={ArmorItems:[{}, {tag: {isMagnet:1b}}, {}, {}]}, sort=random] at @s run say I am holding a magnet.

# Make entities glow
effect give @e[type=!minecraft:player,nbt={ArmorItems: [{}, {components:{"minecraft:custom_data": {isMagnet: 1b}} }, {}, {}]}] minecraft:glowing 30 0 true

# Command that lists them all + helper text
tellraw @s ["",{"text":"Loaded mobs holding magnets:\n","bold":true,"color":"yellow"},{"text":"Legs: ["},{"selector":"@e[type=!minecraft:player,nbt={ArmorItems: [{}, {components:{'minecraft:custom_data': {isMagnet: 1b}} }, {}, {}]}]"},{"text":"]\nHandheld: ["},{"selector":"@e[type=!minecraft:player,nbt={HandItems: [{components:{'minecraft:custom_data': {isMagnet: 1b}}}]}]"},{"text":"]\n\nThey have all been given glowing for 30 seconds.\nUse this to teleport to one: "},{"text":"[Click to suggest legs command]","color":"yellow","clickEvent":{"action":"suggest_command","value":"/tp @e[type=!minecraft:player,nbt={ArmorItems: [{}, {components:{'minecraft:custom_data': {isMagnet: 1b}} }, {}, {}]}, limit=1]"},"hoverEvent":{"action":"show_text","contents":"Suggest command"}},{"text":" "},{"text":"[Click to suggest handheld command]","color":"yellow","clickEvent":{"action":"suggest_command","value":"/tp @e[type=!minecraft:player,nbt={HandItems: [{components:{'minecraft:custom_data': {isMagnet: 1b}}}]}, limit=1]"},"hoverEvent":{"action":"show_text","contents":"Suggest command"}},{"text":"\nYou can select them for commands via:\n"},{"text":"@e[type=!minecraft:player,nbt={ArmorItems: [{}, {components:{'minecraft:custom_data': {isMagnet: 1b}} }, {}, {}]}]","color":"yellow","clickEvent":{"action":"copy_to_clipboard","value":"@e[type=!minecraft:player,nbt={ArmorItems: [{}, {components:{'minecraft:custom_data': {isMagnet: 1b}} }, {}, {}]}]"},"hoverEvent":{"action":"show_text","contents":"Click to Copy"}}]
